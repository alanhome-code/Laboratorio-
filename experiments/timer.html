<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timer</title>

<link rel="stylesheet" href="../style.css">

<style>
body{
  background:#020617;
}

.timer-app{
  max-width:420px;
  margin:40px auto;
  padding:24px;
  background:linear-gradient(180deg,#020617,#020617);
  border-radius:24px;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
  text-align:center;
}

.display{
  font-size:56px;
  font-family:monospace;
  letter-spacing:3px;
  margin:20px 0;
}

.progress{
  height:10px;
  background:#1e293b;
  border-radius:20px;
  overflow:hidden;
  margin-bottom:20px;
}

.bar{
  height:100%;
  width:100%;
  background:#22c55e;
  transition:width .4s linear;
}

.controls{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
}

button{
  padding:12px 18px;
  border-radius:14px;
  border:none;
  background:#22c55e;
  color:#022c22;
  font-weight:600;
  cursor:pointer;
}

button.secondary{
  background:#334155;
  color:#e5e7eb;
}

.inputs{
  margin-top:10px;
}

input{
  width:70px;
  padding:8px;
  border-radius:10px;
  border:none;
  text-align:center;
  background:#020617;
  color:white;
  font-size:16px;
}
</style>
</head>

<body>

<div class="timer-app">
  <h2>‚è± Timer</h2>

  <div class="inputs">
    <input id="min" type="number" min="0" value="0"> min
    <input id="sec" type="number" min="0" max="59" value="30"> sec
  </div>

  <div class="display" id="display">00:30</div>

  <div class="progress">
    <div class="bar" id="bar"></div>
  </div>

  <div class="controls">
    <button onclick="start()">Start</button>
    <button class="secondary" onclick="pause()">Pausa</button>
    <button class="secondary" onclick="reset()">Reset</button>
  </div>

  <audio id="alarm" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>
</div>

<script>
let total = 30;
let current = 30;
let timer = null;

const display = document.getElementById("display");
const bar = document.getElementById("bar");
const alarm = document.getElementById("alarm");

function update(){
  let m = Math.floor(current/60);
  let s = current%60;
  display.textContent =
    String(m).padStart(2,"0")+":"+String(s).padStart(2,"0");
  bar.style.width = (current/total*100)+"%";

  if(current/total < .3) bar.style.background="#ef4444";
  else if(current/total < .6) bar.style.background="#facc15";
  else bar.style.background="#22c55e";
}

function readInput(){
  const m = +min.value || 0;
  const s = +sec.value || 0;
  total = m*60 + s;
  current = total;
  update();
}

readInput();

function start(){
  if(timer || total<=0) return;
  timer = setInterval(()=>{
    current--;
    update();
    if(current<=0){
      clearInterval(timer);
      timer=null;
      alarm.play();
    }
  },1000);
}

function pause(){
  clearInterval(timer);
  timer=null;
}

function reset(){
  pause();
  readInput();
}
</script>

</body>
</html>

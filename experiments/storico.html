<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Storico</title>
<link rel="stylesheet" href="../style.css">
</head>

<body>

<h1>ðŸ“Š Storico Allenamenti</h1>

<div id="list"></div>

<a class="card" href="../index.html">â¬… Dashboard</a>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const container=document.getElementById("list");

["petto","spalle","gambe"].forEach(schema=>{
  const data=JSON.parse(localStorage.getItem("storico_"+schema)||"[]");
  if(data.length<2) return;

  const card=document.createElement("div");
  card.className="card";
  card.innerHTML=`<h2>${schema.toUpperCase()}</h2><canvas></canvas>`;
  container.appendChild(card);

  const ctx=card.querySelector("canvas");

  const labels=data.map(d=>d.date);
  const values=Object.keys(data[0])
    .filter(k=>!["date","scheda"].includes(k))
    .map(k=>data.map(d=>+d[k]));

  new Chart(ctx,{
    type:"line",
    data:{
      labels,
      datasets:values.map((v,i)=>({
        label:Object.keys(data[0])[i+2],
        data:v,
        tension:.3
      }))
    }
  });
});
</script>

</body>
</html>
